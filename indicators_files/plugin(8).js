CKEDITOR.plugins.add("ajax",{requires:"xml"}),CKEDITOR.ajax=function(){function t(){if(!CKEDITOR.env.ie||"file:"!=location.protocol)try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return null}function e(t,e){if(4!=t.readyState||!(200<=t.status&&300>t.status||304==t.status||0===t.status||1223==t.status))return null;switch(e){case"text":return t.responseText;case"xml":var n=t.responseXML;return new CKEDITOR.xml(n&&n.firstChild?n:t.responseText);case"arraybuffer":return t.response;default:return null}}function n(n,r,u){var a=!!r,s=t();return s?(a&&"text"!==u&&"xml"!==u&&(s.responseType=u),s.open("GET",n,a),a&&(s.onreadystatechange=function(){4==s.readyState&&(r(e(s,u)),s=null)}),s.send(null),a?"":e(s,u)):null}return{load:function(t,e,r){return n(t,e,r||"text")},post:function(n,r,u,a){return function(n,r,u,a,s){var o=t();if(!o)return null;o.open("POST",n,!0),o.onreadystatechange=function(){4==o.readyState&&(a&&a(e(o,s)),o=null)},o.setRequestHeader("Content-type",u||"application/x-www-form-urlencoded; charset=UTF-8"),o.send(r)}(n,r,u,a,"text")},loadXml:function(t,e){return n(t,e,"xml")},loadText:function(t,e){return n(t,e,"text")},loadBinary:function(t,e){return n(t,e,"arraybuffer")}}}();
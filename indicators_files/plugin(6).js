!function(){function r(t,e){var n=t.shift();n&&n.handle(e,(function(){r(t,e)}))}function t(r,t){var n,o,a=0;if(!CKEDITOR.tools.array.isArray(r)||0===r.length)return!0;if(n=CKEDITOR.tools.array.filter(r,(function(r){return-1===CKEDITOR.tools.array.indexOf(e,r)})),0<n.length)for(o=0;o<n.length;o++)!function(r){CKEDITOR.scriptLoader.queue(r,(function(o){o&&e.push(r),++a===n.length&&t()}))}(n[o]);return 0===n.length}var e=[],n=CKEDITOR.tools.createClass({$:function(){this.handlers=[]},proto:{register:function(r){"number"!=typeof r.priority&&(r.priority=10),this.handlers.push(r)},addPasteListener:function(e){e.on("paste",(function(n){var o,a=function(r,t){return CKEDITOR.tools.array.filter(r,(function(r){return r.canHandle(t)})).sort((function(r,t){return r.priority===t.priority?0:r.priority-t.priority}))}(this.handlers,n);if(0!==a.length){if(o=function(r){var t=CKEDITOR.tools.array.reduce(r,(function(r,t){return CKEDITOR.tools.array.isArray(t.filters)?r.concat(t.filters):r}),[]);return CKEDITOR.tools.array.filter(t,(function(r,e){return CKEDITOR.tools.array.indexOf(t,r)===e}))}(a),!(o=t(o,(function(){return e.fire("paste",n.data)}))))return n.cancel();r(a,n)}}),this,null,3)}}});CKEDITOR.plugins.add("pastetools",{requires:["clipboard","ajax"],beforeInit:function(r){r.pasteTools=new n,r.pasteTools.addPasteListener(r)}}),CKEDITOR.plugins.pastetools={filters:{},loadFilters:t,createFilter:function(r){var t=CKEDITOR.tools.array.isArray(r.rules)?r.rules:[r.rules],e=r.additionalTransforms;return function(r,n){var o,a=new CKEDITOR.htmlParser.basicWriter,i=new CKEDITOR.htmlParser.filter;return e&&(r=e(r,n)),CKEDITOR.tools.array.forEach(t,(function(t){i.addRules(t(r,n,i))})),o=CKEDITOR.htmlParser.fragment.fromHtml(r),i.applyTo(o),o.writeHtml(a),a.getHtml()}},getClipboardData:function(r,t){var e;return CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||"text/html"===t?(e=r.dataTransfer.getData(t,!0))||"text/html"!==t?e:r.dataValue:null},getConfigValue:function(r,t){if(r&&r.config){var e=CKEDITOR.tools,n=r.config,o=e.object.keys(n),a=["pasteTools_"+t,"pasteFromWord_"+t,"pasteFromWord"+e.capitalize(t,!0)];a=e.array.find(a,(function(r){return-1!==e.array.indexOf(o,r)}));return n[a]}},getContentGeneratorName:function(r){if((r=/<meta\s+name=["']?generator["']?\s+content=["']?(\w+)/gi.exec(r))&&r.length)return 0===(r=r[1].toLowerCase()).indexOf("microsoft")?"microsoft":0===r.indexOf("libreoffice")?"libreoffice":"unknown"}},CKEDITOR.pasteFilters=CKEDITOR.plugins.pastetools.filters}();